{"version":3,"sources":["main.js"],"names":["app","PIXI","Application","view","document","getElementById","width","height","manifest","testFilter","blurDir","loadAssets","loader","add","load","onAssetsLoaded","resources","console","log","backgroundColorShift","videoMask","basicDisplacement","ticker","e","update","basicMask","ball","Sprite","texture","anchor","set","bg","background","mask","addEventListener","x","offsetX","y","offsetY","stage","addChild","basicFilter","filters","BlurFilter","blur","TweenMax","fromTo","repeat","yoyo","rotation","ease","Linear","easeNone","colorFilter","ColorMatrixFilter","colorFilterParams","hue","onUpdate","vidTex","Texture","fromVideo","timelapse","data","baseTexture","source","setAttribute","vid","headMask","silhouette","scale","interactive","on","play","displaceSprite","displacement3","displaceFilter","DisplacementFilter","Elastic","easeOut","displaceOnClick","resize","canvasAspect","screen","screenAspect","window","innerWidth","innerHeight","newTransform","style","transform","onload"],"mappings":"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","file":"main.js","sourcesContent":["let app = new PIXI.Application({\n\tview: document.getElementById(\"pixiCanvas\"),\n\twidth: 1280,\n\theight: 720\n});\n\nlet manifest = [\n\t{\"key\" : \"ball\", \"url\" : \"dist/img/logo.png\"},\n\t{\"key\" : \"background\", \"url\" : \"dist/img/nathan-langer-1331407-unsplash.jpg\"},\n\t{\"key\" : \"silhouette\", \"url\" : \"dist/img/maranatha-pizarras-342561-unsplash-mask.png\"},\n\t{\"key\" : \"displacement\", \"url\" : \"dist/img/displacement.png\"},\n\t{\"key\" : \"displacement2\", \"url\" : \"dist/img/displacement2.png\"},\n\t{\"key\" : \"displacement3\", \"url\" : \"dist/img/displacement3.png\"},\n\t{\"key\" : \"timelapse\", \"url\" : \"dist/video/NightSkyTImelapse.mp4\"}\n\t\n];\n\nlet testFilter;\n\nlet blurDir = 1;\n\nfunction loadAssets() {\n\tapp.loader.add(manifest);\n\n\tapp.loader.load(onAssetsLoaded);\n}\n\nfunction onAssetsLoaded(loader, resources) {\n\tconsole.log(resources);\n\n\t// basicMask();\n\n\t// basicFilter();\n\n\tbackgroundColorShift();\n\n\tvideoMask();\n\n\tbasicDisplacement();\n\n\tapp.ticker.add((e) => update(e));\n}\n\nfunction basicMask() {\n\t// set up image to use as mask\n\tlet ball = new PIXI.Sprite(app.loader.resources.ball.texture);\n\tball.anchor.set(0.5);\n\n\t// set up background image\n\tlet bg = new PIXI.Sprite(app.loader.resources.background.texture);\n\t// set mask to other sprite\n\tbg.mask = ball;\n\n\tapp.view.addEventListener(\"mousemove\", function(e){\n\t\t// console.log(e);\n\t\tball.x = e.offsetX;\n\t\tball.y = e.offsetY;\n\t});\n\n\tapp.stage.addChild(bg);\n\tapp.stage.addChild(ball);\n\t\n}\n\nfunction basicFilter() {\n\tlet bg = new PIXI.Sprite(app.loader.resources.background.texture);\n\tapp.stage.addChild(bg);\n\n\tlet ball = new PIXI.Sprite(app.loader.resources.ball.texture);\n\tball.x = 700;\n\tball.y = 400;\n\tball.anchor.set(0.5);\n\tapp.stage.addChild(ball);\n\n\ttestFilter = new PIXI.filters.BlurFilter();\n\ttestFilter.blur = 0;\n\n\tball.filters = [testFilter];\n\n\tTweenMax.fromTo(testFilter, 1, {blur: 0}, {blur: 10, repeat: -1, yoyo: true});\n\n\tTweenMax.fromTo(ball, 5, {rotation: 0}, {rotation: 6.28, repeat: -1, ease: Linear.easeNone});\n}\n\nfunction backgroundColorShift() {\n\tlet bg = new PIXI.Sprite(app.loader.resources.background.texture);\n\tapp.stage.addChild(bg);\n\n\tlet colorFilter = new PIXI.filters.ColorMatrixFilter();\n\tbg.filters = [colorFilter];\n\n\tlet colorFilterParams = {\n\t\thue: 0\n\t};\n\n\tTweenMax.fromTo(\n\t\tcolorFilterParams, \n\t\t8, \n\t\t{\n\t\t\thue: 0\n\t\t}, \n\t\t{\n\t\t\thue: 360, \n\t\t\trepeat: -1, \n\t\t\tease: Linear.easeNone,\n\t\t\tonUpdate: function() {\n\t\t\t\tcolorFilter.hue(colorFilterParams.hue);\n\t\t\t}\n\t\t}\n\t);\n}\n\nfunction videoMask() {\n\tlet vidTex = new PIXI.Texture.fromVideo(app.loader.resources.timelapse.data);\n\n\tvidTex.baseTexture.source.setAttribute('loop','');\n\tvidTex.baseTexture.source.setAttribute('muted','');\n\tvidTex.baseTexture.source.setAttribute('playsinline','');\n\n\tlet vid = new PIXI.Sprite(vidTex);\n\tvid.y = 180;\n\tapp.stage.addChild(vid);\n\n\tlet headMask = new PIXI.Sprite(app.loader.resources.silhouette.texture);\n\theadMask.anchor.set(0.5, 1);\n\theadMask.scale.set(0.75);\n\theadMask.y = 720;\n\theadMask.x = 640;\n\tapp.stage.addChild(headMask);\n\n\tvid.mask = headMask;\n\n\tvid.interactive = true;\n\tvid.on(\"pointerdown\", function() {\n\t\tvidTex.baseTexture.source.play();\n\t})\n}\n\nfunction basicDisplacement() {\n\tlet displaceSprite = new PIXI.Sprite(app.loader.resources.displacement3.texture);\n\n\t// displaceSprite.x = 500;\n\t// displaceSprite.anchor.set(0.5);\n\tapp.stage.addChild(displaceSprite);\n\n\tlet displaceFilter = new PIXI.filters.DisplacementFilter(displaceSprite);\n\tdisplaceFilter.scale.set(0);\n\tapp.stage.filters = [displaceFilter];\n\n\tapp.view.addEventListener(\"pointerdown\", function(e){\n\t\tTweenMax.fromTo(displaceFilter.scale, 1, {x: 40, y: 40}, {x: 0, y: 0, ease: Elastic.easeOut});\n\t});\n}\n\nfunction displaceOnClick(e) {\n\n}\n\nfunction update(e) {\n\t// rotateBalls();\n\n}\n\nfunction resize(e) {\n\tconsole.log(\"resize\");\n\t// resize canvas to center cut\n\tlet canvasAspect = app.screen.width / app.screen.height;\n\tlet screenAspect = window.innerWidth / window.innerHeight;\n\tlet scale = 1;\n\n\tif (screenAspect >= canvasAspect) {\n\t\t// if screen > canvas, screen is wider\n\t\t// landscape, make width match\n\t\tscale = window.innerWidth / app.screen.width;\n\t} else {\n\t\t// else canvas is wider, so make height match\n\t\t// portrait, make height match\n\t\tscale = window.innerHeight / app.screen.height;\n\t}\n\n\tlet newTransform = 'scale(' + scale + ')';\n\n\tapp.view.style.transform = newTransform;\n}\n\nwindow.onload = function() {\n\twindow.addEventListener(\"resize\", resize);\n\tresize();\n\n\tloadAssets();\n}"]}